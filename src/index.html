<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; media-src 'self' blob: data:; connect-src 'self' https://clients.denvic.ru">
    <title>Call Watcher</title>
    <link rel="stylesheet" href="styles/app.css">
</head>

<body>
    <div class="titlebar">
        <div class="titlebar-drag">
            <span class="titlebar-title">Call Watcher</span>
            <span id="app-version" class="titlebar-version">v...</span>
        </div>
        <div class="titlebar-controls">
            <button id="btn-minimize" class="titlebar-btn" title="–°–≤–µ—Ä–Ω—É—Ç—å">
                <svg width="12" height="12" viewBox="0 0 12 12">
                    <rect fill="currentColor" width="10" height="1" x="1" y="6"></rect>
                </svg>
            </button>
            <button id="btn-maximize" class="titlebar-btn" title="–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å">
                <svg width="12" height="12" viewBox="0 0 12 12">
                    <rect stroke="currentColor" fill="none" width="9" height="9" x="1.5" y="1.5"></rect>
                </svg>
            </button>
            <button id="btn-close" class="titlebar-btn titlebar-btn-close" title="–ó–∞–∫—Ä—ã—Ç—å">
                <svg width="12" height="12" viewBox="0 0 12 12">
                    <path fill="currentColor"
                        d="M6.707 6l3.146-3.146a.5.5 0 00-.707-.708L6 5.293 2.854 2.146a.5.5 0 10-.708.708L5.293 6l-3.147 3.146a.5.5 0 00.708.708L6 6.707l3.146 3.147a.5.5 0 00.708-.708L6.707 6z" />
                </svg>
            </button>
        </div>
    </div>

    <div class="app-layout">

        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="connection-status" title="–°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è">
                    <div id="status-indicator" class="status-dot offline"></div>
                    <span class="status-text">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</span>
                </div>
            </div>

            <div class="sidebar-content">

                <div class="mode-tabs">
                    <button class="mode-tab active" data-mode="incoming">–í—Ö–æ–¥—è—â–∏–µ</button>
                    <button class="mode-tab" data-mode="bulk">–í—Å–µ –∑–≤–æ–Ω–∫–∏</button>
                </div>


                <div id="bulk-stats" class="bulk-stats hidden">
                    <div class="bulk-stats-row">
                        <div class="stat-item">
                            <span class="stat-value" id="stat-total">0</span>
                            <span class="stat-label">–í—Å–µ–≥–æ</span>
                        </div>
                        <div class="stat-item stat-success">
                            <span class="stat-value" id="stat-filled">0</span>
                            <span class="stat-label">–°–æ–∑–¥–∞–Ω–æ</span>
                        </div>
                        <div class="stat-item stat-pending">
                            <span class="stat-value" id="stat-unfilled">0</span>
                            <span class="stat-label">–û—Å—Ç–∞–ª–æ—Å—å</span>
                        </div>
                    </div>
                </div>


                <div class="section-label">–ò–°–¢–û–†–ò–Ø</div>


                <div class="history-search-container">
                    <input type="text" id="history-search" class="history-search-input"
                        placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É...">
                </div>


                <div class="history-filter-tabs">
                    <button class="filter-tab active" data-filter="all">–í—Å–µ</button>
                    <button class="filter-tab" data-filter="unprocessed">
                        <span class="tab-dot pending"></span>–û–∂–∏–¥–∞—é—Ç
                    </button>
                    <button class="filter-tab" data-filter="created">
                        <span class="tab-dot success"></span>–°–æ–∑–¥–∞–Ω—ã
                    </button>
                    <button class="filter-tab" data-filter="skipped">
                        <span class="tab-dot skipped"></span>–ü—Ä–æ–ø—É—â–µ–Ω—ã
                    </button>
                </div>

                <ul id="history-list" class="history-list">

                </ul>
                <div id="history-empty" class="history-empty">–ù–µ—Ç –∑–≤–æ–Ω–∫–æ–≤</div>
            </div>
        </aside>


        <main class="workspace">

            <div id="bulk-nav" class="bulk-nav hidden">
                <button id="btn-first-call" class="nav-btn" title="–í –Ω–∞—á–∞–ª–æ">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2.5">
                        <path d="M11 17l-5-5 5-5M18 17l-5-5 5-5" />
                    </svg>
                </button>
                <button id="btn-prev-call" class="nav-btn" title="–ù–∞–∑–∞–¥">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2.5">
                        <path d="M15 18l-6-6 6-6" />
                    </svg>
                </button>
                <span id="bulk-position" class="bulk-position">1 / 10</span>
                <button id="btn-next-call" class="nav-btn" title="–í–ø–µ—Ä—ë–¥">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2.5">
                        <path d="M9 18l6-6-6-6" />
                    </svg>
                </button>
                <button id="btn-last-call" class="nav-btn" title="–í –∫–æ–Ω–µ—Ü">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2.5">
                        <path d="M13 17l5-5-5-5M6 17l5-5-5-5" />
                    </svg>
                </button>

                <div class="nav-separator"></div>

                <div class="date-picker-wrapper">
                    <button id="btn-date-picker" class="date-picker-btn" title="–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="3" y="4" width="18" height="18" rx="2" />
                            <line x1="16" y1="2" x2="16" y2="6" />
                            <line x1="8" y1="2" x2="8" y2="6" />
                            <line x1="3" y1="10" x2="21" y2="10" />
                        </svg>
                        <span id="date-picker-label">–í—Å–µ –¥–∞—Ç—ã</span>
                        <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M6 9l6 6 6-6" />
                        </svg>
                    </button>
                    <div id="date-picker-dropdown" class="date-picker-dropdown hidden">
                        <div class="date-picker-header">
                            <span>–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É</span>
                            <button id="btn-clear-date" class="date-clear-btn" title="–°–±—Ä–æ—Å–∏—Ç—å">–°–±—Ä–æ—Å–∏—Ç—å</button>
                        </div>
                        <div id="date-picker-list" class="date-picker-list">
                        </div>
                    </div>
                </div>

                <div class="nav-separator"></div>

                <div class="duration-filter-inline">
                    <span class="duration-label">‚â•</span>
                    <input type="range" id="duration-slider-inline" class="duration-slider-inline" min="0" max="180"
                        value="0" step="5">
                    <span id="duration-value-inline" class="duration-value-inline">0—Å</span>
                </div>

                <button id="btn-refresh-bulk" class="nav-btn nav-btn-refresh" title="–û–±–Ω–æ–≤–∏—Ç—å">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M23 4v6h-6" />
                        <path d="M1 20v-6h6" />
                        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15" />
                    </svg>
                </button>
            </div>

            <div id="empty-state" class="view-state">
                <div class="idle-container">
                    <div class="idle-illustration">üì°</div>
                    <h2>–°–∏—Å—Ç–µ–º–∞ –∞–∫—Ç–∏–≤–Ω–∞</h2>
                    <p>–û–∂–∏–¥–∞–Ω–∏–µ –≤—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤...</p>
                    <button id="btn-login" class="btn btn-primary mt-4">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ö–æ–¥</button>
                </div>
            </div>


            <div id="call-panel" class="view-state hidden">





                <header class="call-header">
                    <div class="call-primary-info">
                        <h1 id="call-phone" class="phone-number">+7 ...</h1>
                        <span id="call-status-badge" class="call-status-badge"></span>
                        <span id="call-duration" class="timer-badge">00:00</span>
                    </div>
                    <div class="header-actions">
                        <span id="call-date" class="date-badge">...</span>
                        <button id="btn-open-browser" class="btn btn-secondary text-sm"
                            title="–û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–æ–±—Ö–æ–¥ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è 3 –¥–Ω–µ–π)">üåê –í
                            –±—Ä–∞—É–∑–µ—Ä–µ</button>
                        <button id="btn-skip" class="btn btn-secondary text-sm">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
                    </div>
                </header>


                <div id="audio-player-container" class="custom-audio-player hidden">
                    <audio id="call-audio"></audio>

                    <div class="play-btn-wrapper">
                        <div class="spinner-ring"></div>
                        <button id="audio-play-btn" class="audio-btn">
                            <span class="play-icon">‚ñ∂</span>
                            <span class="pause-icon">‚ùö‚ùö</span>
                        </button>
                    </div>

                    <div class="audio-progress-container">
                        <span id="audio-time-current" class="audio-time">0:00</span>
                        <input type="range" id="audio-progress" class="audio-slider" min="0" max="100" value="0">
                        <span id="audio-time-total" class="audio-time">0:00</span>
                    </div>

                    <div class="speed-btns">
                        <button class="btn-speed active" data-speed="1">1x</button>
                        <button class="btn-speed" data-speed="1.5">1.5x</button>
                        <button class="btn-speed" data-speed="2">2x</button>
                    </div>
                </div>

                <div class="dashboard-grid">

                    <div class="grid-column client-column">
                        <div class="panel-card full-height">
                            <div class="card-header">
                                <h3>–ö–ª–∏–µ–Ω—Ç</h3>
                            </div>
                            <div class="card-body p-0 flex-column">
                                <div class="search-box-container">
                                    <input type="text" id="client-search" class="modern-input search-input"
                                        placeholder="–ü–æ–∏—Å–∫ (–ò–º—è, –ò–ù–ù, –¢–µ–ª–µ—Ñ–æ–Ω)...">
                                </div>

                                <div class="list-scroll-area">

                                    <div id="suggestions-section">
                                        <div class="list-label-small">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</div>
                                        <ul id="suggestions-list" class="unified-list"></ul>
                                        <div id="no-suggestions" class="hint-text hidden">–ù–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π</div>
                                    </div>


                                    <div id="search-section">
                                        <ul id="client-list" class="unified-list"></ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="grid-column form-column">
                        <div class="panel-card full-height">
                            <div class="card-header">
                                <h3>–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞</h3>
                            </div>
                            <div class="card-body flex-column">
                                <div class="form-group">
                                    <label>–¢–µ–º–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è</label>
                                    <input type="text" id="ticket-subject" class="modern-input"
                                        placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞—Å—Å–∞">
                                </div>
                                <div class="form-group flex-grow">
                                    <label>–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã</label>
                                    <textarea id="ticket-desc" class="modern-textarea full-height-input"
                                        placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –∑–≤–æ–Ω–∫–∞..."></textarea>
                                </div>

                                <div class="close-after-create-section">
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="close-after-create">
                                        <span class="toggle-slider"></span>
                                        <span class="toggle-label">–°–æ–∑–¥–∞—Ç—å –∏ —Å—Ä–∞–∑—É –∑–∞–∫—Ä—ã—Ç—å</span>
                                    </label>

                                    <div id="close-options" class="close-options hidden">
                                        <div class="form-group">
                                            <label>–ü—Ä–∏—á–∏–Ω–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è</label>
                                            <select id="close-reason" class="modern-select" style="display: none;">
                                                <option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option>
                                            </select>

                                            <div id="close-reason-custom-container" class="custom-select-container">
                                                <div id="close-reason-display"
                                                    class="custom-select-trigger modern-input">
                                                    <span id="close-reason-text">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É</span>
                                                    <span class="arrow">‚ñº</span>
                                                </div>
                                                <div id="close-reason-dropdown" class="custom-options-dropdown hidden">
                                                    <div class="search-wrapper">
                                                        <input type="text" id="close-reason-search"
                                                            placeholder="–ü–æ–∏—Å–∫..." autocomplete="off">
                                                    </div>
                                                    <div id="close-reason-list" class="options-list"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∑–∞–∫—Ä—ã—Ç–∏—è</label>
                                            <input type="text" id="close-comment" class="modern-input"
                                                placeholder="–í–æ–ø—Ä–æ—Å —Ä–µ—à—ë–Ω">
                                        </div>
                                        <div class="form-group form-group-inline">
                                            <label>–í—Ä–µ–º—è (–º–∏–Ω)</label>
                                            <input type="number" id="close-time" class="modern-input time-input"
                                                value="5" min="1" max="480">
                                        </div>
                                    </div>
                                </div>

                                <div class="form-footer">
                                    <button id="btn-create" class="btn btn-primary btn-block btn-lg" disabled>–°–æ–∑–¥–∞—Ç—å
                                        –∑–∞—è–≤–∫—É</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div style="display:none;">
        <button id="btn-quick"></button>
        <button id="btn-client"></button>
        <div class="nav-tabs">
            <button class="nav-tab" data-tab="main"></button>
            <button class="nav-tab" data-tab="history"></button>
        </div>
        <div id="history-panel"></div>
        <div id="main-panel"></div>
    </div>


    <script src="renderer/modules/audio.js"></script>
    <script src="renderer/modules/filters.js"></script>
    <script src="renderer/modules/date-picker.js"></script>
    <script src="renderer/modules/bulk-mode.js"></script>
    <script src="renderer/modules/clients.js"></script>
    <script src="renderer/modules/ticket-ui.js"></script>
    <script src="renderer/modules/topics-ui.js"></script>


    <script src="renderer/app.js"></script>
</body>

</html>